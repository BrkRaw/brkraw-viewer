# brkraw-viewer 로드맵

---

## 개요  
brkraw-viewer는 대용량 RAW 이미지 처리와 시각화를 효율적으로 수행하기 위해 설계된 뷰어입니다. 본 로드맵은 **멀티프로세싱(multiprocessing)** 기반의 외부 프로세서/워커(worker)를 활용하여 무거운 작업을 분산 처리하고, GUI 컨트롤러는 주로 상태 관리(state management)와 오케스트레이션(orchestration)에 집중하는 아키텍처를 목표로 합니다. 결과 데이터는 **공유 메모리(shared memory)** 를 통해 전달되어 성능과 응답성을 극대화합니다.

---

## 단계별 계획

### Phase 1: 아키텍처 설계 및 기반 구축  
- 주요 목표  
  - 멀티프로세싱 워커 프로세스 구조 설계  
  - 공유 메모리를 통한 데이터 교환 프로토콜 정의  
  - GUI 컨트롤러와 프로세서 간 IPC(Inter-Process Communication) 기본 구현  
- 산출물  
  - 프로세서 워커 템플릿  
  - 공유 메모리 매니저 모듈  
  - 컨트롤러-프로세서 간 메시지 큐 및 이벤트 시스템  
- 기간: 1~2개월

### Phase 2: 핵심 기능 분리 및 구현  
- 주요 목표  
  - 이미지 디코딩, 디베이어링(demosaicing), 노이즈 제거 등 무거운 처리 워커로 이전  
  - GUI 컨트롤러는 상태 관리(state management) 및 사용자 입력 처리 집중  
  - 결과 데이터 공유 메모리를 통해 GUI에 전달 및 렌더링  
- 산출물  
  - 프로세싱 파이프라인 모듈  
  - 상태 관리 모듈 확장  
  - GUI 렌더링 최적화  
- 기간: 3~4개월

### Phase 3: 고도화 및 안정화  
- 주요 목표  
  - 멀티프로세싱 워커의 동적 스케줄링 및 부하 분산 구현  
  - 에러 핸들링 및 복구 메커니즘 강화  
  - IPC 성능 튜닝 및 메모리 최적화  
- 산출물  
  - 동적 워커 매니저  
  - 안정성 테스트 케이스 및 자동화 스크립트  
- 기간: 2개월

### Phase 4: 기능 확장 및 사용자 경험 개선  
- 주요 목표  
  - 실시간 프리뷰 및 점진적 로딩 기능 추가  
  - 사용자 설정 기반 워커 파라미터 조정 UI 제공  
  - 로깅 및 모니터링 도구 통합  
- 산출물  
  - UI 개선 및 설정 패널  
  - 실시간 상태 모니터링 대시보드  
- 기간: 2개월

---

## 마일스톤

| 마일스톤 | 설명 | 예상 완료일 |
|----------|------|-------------|
| M1 | 멀티프로세싱 아키텍처 및 IPC 기본 구현 완료 | 2개월차 말 |
| M2 | 핵심 이미지 처리 워커 프로세스 분리 및 공유 메모리 연동 완료 | 4개월차 말 |
| M3 | 동적 워커 스케줄링 및 안정성 강화 완료 | 6개월차 말 |
| M4 | 실시간 프리뷰 및 사용자 설정 UI 완성 | 8개월차 말 |

---

## 비목표(Non-goals)  
- 단일 프로세스 내 모든 처리를 수행하는 구조  
- 네트워크 기반 분산 처리(Distributed Processing)  
- GUI 내 복잡한 이미지 처리 알고리즘 구현  
- RAW 포맷 지원 범위 확장 (기본 포맷에 집중)

---

## 위험요인(Risks)  
- 공유 메모리 동기화 문제로 인한 데이터 경쟁(Race Condition) 발생 가능성  
- IPC 지연으로 인한 GUI 응답성 저하  
- 멀티프로세싱 환경에서의 디버깅 및 테스트 복잡도 증가  
- 워커 프로세스 간 자원 경쟁(Resource Contention) 및 메모리 누수  
- 사용자 환경(운영체제, 하드웨어) 다양성으로 인한 호환성 문제

---

## 모듈별 책임 및 소유권

| 모듈 | 책임 | 소유권 |
|-------|-------|--------|
| UI (User Interface) | 사용자 입력 처리, 상태 표시, 렌더링 | GUI 개발팀 |
| Controllers | 상태 관리(state management), 사용자 이벤트 오케스트레이션, IPC 메시지 송수신 | 컨트롤러 팀 |
| State | 애플리케이션 전역 상태 저장, 공유 메모리 인터페이스 관리 | 컨트롤러 팀 |
| Processing (워커 프로세스) | RAW 이미지 디코딩, 디베이어링, 필터링 등 무거운 작업 수행 | 프로세싱 팀 |
| IPC (Inter-Process Communication) | 프로세서와 컨트롤러 간 메시지 교환, 공유 메모리 관리 | 플랫폼 팀 |

---

## 결론  
본 로드맵은 brkraw-viewer의 성능과 확장성을 극대화하기 위해 멀티프로세싱과 공유 메모리를 핵심으로 하는 아키텍처를 단계적으로 구현하는 데 집중합니다. 각 팀은 명확한 모듈 책임 하에 협업하며, 위험요인을 사전에 관리하여 안정적이고 효율적인 뷰어 개발을 목표로 합니다.
